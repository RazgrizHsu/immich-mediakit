@import "base";

html, body {
	margin:0;
	padding:0;
}

body {
	font-family:"Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
	background-color:#505050;
	color:#EFEFEF;
	min-height:100vh;
	display:flex;
	flex-direction:column;
	box-sizing:border-box;
}


::-webkit-scrollbar {
	width:8px;
	height:8px;

	&-track {
		background:#1A1A1A;
	}

	&-thumb {
		background:#555555;
		border-radius:4px;

		&:hover {
			background:#777777;
		}
	}
}

@media (max-width:768px) {
	.sidebar-column {
		margin-bottom:20px;
		min-height:auto;
	}

	.notification-container {
		width:90%;
		right:5%;
	}

	.image-grid {
		grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
	}

	.duplicate-container {
		grid-template-columns: 1fr;
	}
}

.sidebar {

	position:relative;
	width:0px;
	height:0px;

	> div {
		//border: red dotted 2px;
		width:250px;
		margin:28px 0 0 20px;

		small {
			font-size:12px;
		}
	}
}

.page {

	//* {
	//	margin:0;
	//	padding:0;
	//	box-sizing:border-box;
	//}

	$debug:false;
	$sideW:250px;
	$gx:8px;
	$gy:3px;
	$pad:20px;
	$spac:($pad * 2) + ($gx*2) + $sideW + 10px;

	.side {
		flex:0 0 $sideW;
		min-width:200px;
		max-width:300px;
		@if $debug { border:#1A95C3 3px dotted }
	}

	> div > div > .body {

		display:flex;
		flex-wrap:wrap;
		align-items:flex-start;
		gap:$gy $gx;
		padding:$pad;

		> .main {
			flex:0 0 calc(100vw - #{$spac});
			margin-left:auto;

			@if $debug { border:red 2px dotted }
		}

		> .main ~ div {
			@if $debug { border:blue 2px dotted }

			flex:1 0 50vw;
		}
	}


	// in menu
	//> div {
	//	display:flex;
	//	align-items:center;
	//	padding:8px 0;
	//	cursor:pointer;
	//}
	//
	//.ico {
	//	margin-right:10px;
	//	font-size:18px;
	//	width:24px;
	//	text-align:center;
	//}

	//> * {
	//	flex:1 1 calc(100vw - 450px);
	//	min-width:0;
	//	border-radius:8px;
	//	border:2px solid blue;
	//}
	//
	//> *:nth-child(n+6) {
	//	flex:1 1 100%;
	//	border-radius:8px;
	//	border:2px solid green;
	//}

	//// 響應式：縮小 sidebar 而不是垂直排列
	//@media (max-width:768px) {
	//	> div:first-child {
	//		flex:0 0 60px;
	//		min-width:60px;
	//		max-width:60px;
	//		padding:10px;
	//
	//		// 隱藏 sidebar 內的文字，只保留圖標
	//		span:not(.ico) {
	//			display:none;
	//		}
	//
	//		h3 {
	//			display:none;
	//		}
	//
	//		p {
	//			display:none;
	//		}
	//
	//		// 讓圖標居中顯示
	//		.ico {
	//			display:block;
	//			text-align:center;
	//			margin:5px 0;
	//		}
	//	}
	//}

}

.txt-sm {
	font-size:0.75rem!important;
}

.footer {
	margin-top:auto;
	border-top:1px solid #333333;
	background-color:#212121;
	padding:15px 0;
	text-align:center;
	width:100%;
	color:#A0A0A0;
	margin-bottom:0;
	box-sizing:border-box;
	position:relative;

	&::before {
		content:"";
		position:absolute;
		top:-1px;
		left:0;
		right:0;
		height:1px;
		z-index:1;
		background:linear-gradient(to right,
				color-mix(in srgb, var(--nav-bs) 30%, transparent),
				color-mix(in srgb, var(--nav-acc) 50%, transparent),
				color-mix(in srgb, var(--nav-bs) 30%, transparent));
	}
}

.notification-container {
	position:fixed;
	bottom:20px;
	left:20px;
	width:350px;
	z-index:1000;
	max-height:80vh;
	overflow-y:auto;
}

.alert.fade {
	transition:opacity 0.5s linear !important;
}

.sidebar-column {
	min-height:calc(100vh - 200px);
	height:100%;
}

.content-column {
	min-height:calc(100vh - 200px);
}


.image-grid {
	display:grid;
	grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
	gap:15px;
	margin-top:20px;
}

.image-card {
	position:relative;
	overflow:hidden;
	border-radius:8px;
	cursor:pointer;
	transition:all 0.3s ease;
	background-color:#3A3A3A;

	&:hover {
		transform:translateY(-5px);
		box-shadow:0 10px 20px rgba(0, 0, 0, 0.3);

		.overlay {
			opacity:1;
		}
	}

	img {
		width:100%;
		height:180px;
		object-fit:cover;
		border-radius:8px 8px 0 0;
	}

	.overlay {
		position:absolute;
		top:0;
		left:0;
		width:100%;
		height:100%;
		background:rgba(0, 0, 0, 0.7);
		opacity:0;
		transition:opacity 0.3s ease;
		display:flex;
		justify-content:center;
		align-items:center;
	}

	&.selected {
		border:3px solid #3772FF;
	}
}

.progress-container {
	margin:20px 0;
}

.progress {
	height:15px;
	border-radius:5px;
	background-color:#333333;

	&-bar {
		transition:width 0.5s ease-in-out;
	}
}

.pagination-control {
	display:flex;
	justify-content:space-between;
	align-items:center;
	margin:20px 0;
}

.photo-details {
	padding:10px;
	background-color:#3A3A3A;
	border-radius:5px;
	margin-top:10px;
}

.photo-comparison-container {
	position:relative;
	width:100%;
	overflow:hidden;
	margin:20px 0;
}

.selected-photo {
	border:3px solid #3772FF !important;
}

.duplicate-group {
	padding:15px;
	margin-bottom:20px;
	border:1px solid #444444;
	border-radius:5px;
	background-color:#3A3A3A;
}

.loading-spinner {
	display:inline-block;
	width:20px;
	height:20px;
	border:2px solid rgba(255, 255, 255, 0.2);
	border-top-color:#3772FF;
	border-radius:50%;
	animation:spin 1s linear infinite;
}

@keyframes spin {
	to {
		transform:rotate(360deg);
	}
}

.info {
	&-label {
		font-size:14px;
		color:#A0A0A0;
		margin-right:5px;
	}

	&-value {
		font-size:14px;
		font-weight:500;
		color:#E0E0E0;
	}
}

/*======================== Modal ========================*/
.modal {

	.modal-header {
		padding:8px;

		span:first-child {
			margin:0px auto auto 10px;
			color:#BBBBBB;
		}

		button {
			font-size:13px;
		}
	}

	$rad:12px;

	.btn-close {

		color:red;
		background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23fff'%3e%3cpath d='M1.707 1.707a2 2 0 0 1 2.828 0L8 5.172l3.465-3.465a2 2 0 1 1 2.828 2.828L10.828 8l3.465 3.465a2 2 0 0 1-2.828 2.828L8 10.828l-3.465 3.465a2 2 0 0 1-2.828-2.828L5.172 8 1.707 4.535a2 2 0 0 1 0-2.828'/%3e%3c/svg%3e");
		border:1px solid #BBBBBB;
		margin-right:10px;
	}

	//<path d='M1.707 1.707a2 2 0 0 1 2.828 0L8 5.172l3.465-3.465a2 2 0 1 1 2.828 2.828L10.828 8l3.465 3.465a2 2 0 0 1-2.828 2.828L8 10.828l-3.465 3.465a2 2 0 0 1-2.828-2.828L5.172 8 1.707 4.535a2 2 0 0 1 0-2.828'/>
	//data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23fff'%3e%3cpath d='M.293.293a1 1 0 0 1 1.414 0L8 6.586 14.293.293a1 1 0 1 1 1.414 1.414L9.414 8l6.293 6.293a1 1 0 0 1-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 0 1-1.414-1.414L6.586 8 .293 1.707a1 1 0 0 1 0-1.414'/%3e%3c/svg%3e

	&-content {
		border-radius:$rad;
		box-shadow:0 0 12px 5px rgba(255, 255, 255, 0.3);
		background-color:#3A3A3A;
		border:1px solid #5DB1FF99;
	}

	&-header {
		border-bottom:1px solid #333333;
		background-color:#212121;
		color:#E0E0E0;
		border-top-left-radius:$rad;
		border-top-right-radius:$rad;
		font-size:15px;
	}

	&-body {
		color:#E0E0E0;
		margin:10px 20px 20px 20px;
		text-align:center;
		font-size:17px;
	}

	&-footer {
		border-top:1px solid #333333;
		background-color:#212121;
		border-bottom-left-radius:$rad;
		border-bottom-right-radius:$rad;
	}

	&-dialog.img-pop {
		.modal-body {
			margin:auto;
			text-align:center;
			padding:5px 0px;
		}
	}
}

.img-pop {
	img {
		max-width:99vw;
		margin:auto;
	}

	&.auto img {
		max-height:90vh;
	}

	.modal-body {
		flex:none;
		padding:0;
	}
}


.tag {
	border:#E0E0E099 1px solid;
	padding:0 4px 0 4px;
	margin:1px 3px;
	border-radius:5px;
	font-size:12px;
	vertical-align:middle;
	@include bg-gradient(#2D4A69);

	&.second {
		@include bg-gradient(#4A4A4A);
	}

	&.info {
		//background:;
		@include bg-gradient(#6DAA2B);
	}

	&.lg {
		font-size:15px;
		padding:0 4px 2px 4px;
	}

	&.sm {
		font-size:10px;
		padding:0 2px 0 2px;
	}
}


/* Exif info tooltip styling */
.tooltip-exif-info .tooltip-inner {
	padding:10px !important;
	background-color:rgba(20, 20, 20, 0.95) !important;
	backdrop-filter:blur(5px) !important;
	border:1px solid var(--info-dkr) !important;
}

.exif-badge {
	cursor:pointer !important;
	transition:all 0.2s ease-in-out !important;

	&:hover {
		transform:scale(1.1) !important;
		box-shadow:0 0 5px rgba(87, 195, 238, 0.7) !important;
	}
}

.navLnk {
	color:#E0E0E0 !important;
	border-radius:6px;
	padding:8px 15px !important;
	transition:all 0.3s ease;
	position:relative;
	margin:0 5px;
	overflow:hidden;
	font-weight:500;
	letter-spacing:0.3px;
	background:var(--nav-bs);

	&::before {
		content:"";
		position:absolute;
		bottom:0;
		left:50%;
		width:0;
		height:2px;
		background:var(--nav-acc);
		transition:all 0.3s ease;
		transform:translateX(-50%);
	}

	&:hover {
		color:#FFFFFF !important;
		background-color:var(--nav-hov);
		transform:translateY(-2px);
		text-shadow:0 0 8px rgba(255, 255, 255, 0.6);
		text-decoration:none;
		animation:navHover 1s ease infinite;

		&::before {
			width:100%;
		}
	}

	&.active {
		color:#FFFFFF !important;
		background-color:var(--nav-act);
		font-weight:600;
		animation:pulse 2s infinite;

		&::before {
			width:100%;
			height:3px;
		}
	}

	&.disabled {
		color:#D3D3D3 !important;
		pointer-events:none;
		opacity:0.6;
		box-shadow:inset 0 0 5px rgba(0, 0, 0, 0.2);
		position:relative;
		border-radius:6px;
		transform:none !important;
		animation:none !important;
	}

	span {
		display:flex;
		align-items:center;
		gap:8px;
	}
}

.notify {
	.alert {
		box-shadow:0 0 3px 3px #FFFFFF66 !important;
		margin:20px;

		text-shadow:0 0 10px #1A1A1A
	}
}

.nav-glow {
	position:relative;

	&::after {
		content:"";
		position:absolute;
		bottom:-1px;
		left:0;
		right:0;
		height:1px;
		background:linear-gradient(to right,
				color-mix(in srgb, var(--nav-bs) 70%, transparent),
				color-mix(in srgb, var(--nav-acc) 80%, transparent),
				color-mix(in srgb, var(--nav-bs) 70%, transparent));
	}
}

@keyframes pulse {
	0% {
		box-shadow:0 0 0 0 rgba(15, 121, 161, 0.4);
	}
	70% {
		box-shadow:0 0 0 5px rgba(15, 121, 161, 0);
	}
	100% {
		box-shadow:0 0 0 0 rgba(15, 121, 161, 0);
	}
}

@keyframes navHover {
	0% {
		transform:translateY(0);
	}
	50% {
		transform:translateY(-3px);
	}
	100% {
		transform:translateY(0);
	}
}


.popover {
	background-color:#2D2D2D !important;
	border-color:var(--bs-border-color) !important;

	&-header {
		background-color:#212121 !important;
		border-bottom-color:var(--bs-border-color) !important;
		color:#E0E0E0 !important;
	}

	&-body {
		color:#E0E0E0 !important;
	}
}

.test {
	background:#0B66BC;
	color:#1A95C3;
	border:red 1px solid;
}


/*======================== task ========================*/
.tskPanel {
	margin:10px 20px 15px 20px;
	padding:10px 30px 10px 30px;
	border-radius:16px;
	border:2px solid #737373;
	//background:#3F3F3F;
	box-shadow:0 0 6px rgba(255, 255, 255, 0.2);

	@include bg-gradient(#33333F);

	.progress {
		border:#999999 1px solid;
	}

	&.fly {
		position: fixed;
		top: 66px;
		right: 20px;
		margin: 0;
		width: 50vw;
		z-index: 1050;
		box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
		animation: slideIn 0.3s ease-out;
	}
}

@keyframes slideIn {
	from {
		transform: translateX(100%);
		opacity: 0;
	}
	to {
		transform: translateX(0);
		opacity: 1;
	}
}

/*======================== taber ========================*/
.ITab {

	.nav-tabs {
		border: none;
	}

	.nav {
		> div {
			cursor:pointer !important;
			border-radius:4px 4px 0 0;
			transition:all 0.2s ease;

			margin-right:5px;
		}

		.nav-link {
			border: var(--bs-border-color) 1px solid;
			border-bottom:none;
			margin-bottom: 0;
			@include bg-gradient( #666666 );

			&:hover {
				background:var(--main-dkr);
			}

			&.active {
				background:#3772FF;
				color:white;
				font-weight:500;
				@include bg-gradient(#385A7F)
			}

			&.dis {
				opacity:0.5;
				cursor:not-allowed !important;
				pointer-events:none;
				background:#444444;
				color:#999999;
			}
		}
	}

	.tab-content {
		border-radius: 0 12px 12px 12px;
		border:1px solid var(--bs-border-color);
		padding:15px 10px 15px 10px;

		$co:rgb(52, 99, 148);

		background:linear-gradient(
						to bottom,
						rgba($co, 0.5) 0%,
						rgba($co, 0.2) 10%,
						rgba($co, 0.0) 50%,
						rgba($co, 0.2) 90%,
						rgba($co, 0.5) 100%
		);
	}
}

@keyframes fadeIn {
	from { opacity:0; }
	to { opacity:1; }
}


.pager-info {
	display:inline-flex;

	padding:2px 10px 4px 10px;
	margin:0 0 0 10px;
	font-size:0.8rem;

	border-radius:6px;
	background:#1F5C92;
	border:rgba(195, 195, 195, 0.3) 1px solid;
	box-shadow:0 0 2px rgba(195, 195, 195, 0.5);
}

.pager {
	display:inline-flex;
	list-style:none;
	padding:6px 0 6px 0;
	margin:5px auto 5px auto;

	border-radius:6px;
	border:rgba(26, 149, 195, 0.4) 1px solid;
	box-shadow:0 0 3px rgba(26, 149, 195, 0.5);

	li:first-child {
		.lnk {
			border-top-left-radius:6px;
			border-bottom-left-radius:6px;
		}
	}

	li:last-child {
		.lnk {
			border-top-right-radius:6px;
			border-bottom-right-radius:6px;
		}
	}

	.item {

		&.active .lnk {
			background-color:#667EEA;
			border-color:#667EEA;
			color:#FFFFFF;
		}

		&.disabled {
			opacity:0.5;
			cursor:not-allowed;
		}
	}

	.lnk {

		padding:0.375rem 0.75rem;

		text-decoration:none;

		background-color:#2D3748;
		border-color:#4A5568;
		color:#E2E8F0;
		cursor:pointer;

		&:hover {
			background-color:#62C0FF;
			border-color:#667EEA;
			color:#FFFFFF;
			text-shadow:0 0 3px #260564, 0 0 3px #2D3748;
		}

		&:focus {
			box-shadow:0 0 0 0.2rem rgba(102, 126, 234, 0.25);
		}
	}
}

/*======================== common ========================*/
.curP {
	cursor:pointer !important;

	&:hover {
	}
}

//========================================================================
// similar
//========================================================================

.card {
	border-radius:8px;
	box-shadow:0 2px 10px rgba(0, 0, 0, 0.2);
	transition:all 0.3s ease;
	background-color:#3A3A3A;
	border:1px solid #444444;

	&:hover {
		box-shadow:0 5px 15px rgba(0, 0, 0, 0.3);
	}

	&-header {
		background-color:#212121;
		border-bottom:1px solid #333333;
	}

	&-body {
		color:#E0E0E0;
	}
}


.img-card {


	img {
		border-radius:10px;

		&:hover {
			opacity:1;
			transform:scale(1.02);
			transition:all 0.3s ease;
			cursor:pointer;
			box-shadow:0 0 10px rgba(255, 255, 255, 1);
		}
	}

	.head {

		position:relative;

		.floatL {
			position:absolute;
			bottom:5px;
			left:5px;
			display:flex;
			justify-content:start;

			&.top {
				bottom: auto;
				top:5px;
			}
		}

		.floatR {
			position:absolute;
			bottom:5px;
			right:5px;
			display:flex;
			justify-content:end;
			width:100%;
		}
	}





	transition:transform 0.2s;
	margin-bottom:10px;
	border-radius:10px;
	background-color:#3A3A3A;

	//&:hover {
	//	transform:scale(1.03);
	//	box-shadow:0 4px 8px rgba(0, 0, 0, 0.3);
	//}
}


.card.sim {

	$show-borders:false;
	@mixin optional-border($color, $width, $style) {
		@if $show-borders {
			border:$color $width $style;
		}
	}


	border:transparent solid 3px;

	&.has-related {
		border:2px solid var(--warn-bs) !important;
		box-shadow:0 0 8px rgba(254, 178, 4, 0.3);

		.card-header {
			background:linear-gradient(to right, rgba(254, 178, 4, 0.2), transparent);
		}
	}

	&.main {
		background:#1F5C92;
		@include bg-gradient(#1F5C92);

		.card-header {
			background:linear-gradient(to right, rgba(13, 110, 253, 0.15), transparent);
		}
	}


	&.checked {
		border:3px solid var(--info-bs);
	}

	.img {

		position:relative;

		img {
			object-fit:contain;
			height:180px;
			cursor:pointer !important;
		}

		//floating on img left-bottom
		> div:nth-of-type(1) {
			position:absolute;
			bottom:5px;
			left:5px;
			display:flex;
			justify-content:start;
		}

		> div:nth-of-type(2) {
			position:absolute;
			bottom:5px;
			right:5px;
			//border: red 1px solid;
			display:flex;
			justify-content:end;
			width:100%;

			//> span {
			//	font-size:18px !important;
			//}
		}

	}

	.grid {
		width:96%;
		@include optional-border(red, 1px, dotted);
		display:grid;
		grid-template-columns: 20% 80%;
		gap:2px 2px;
		margin:5px 3px 5px 3px;
		padding:0px;

		> *:nth-child(2n-1) {
			justify-self:center;
			white-space:nowrap;
			font-size:12px;
			overflow:visible;
			padding:0px;
			@include optional-border(white, 1px, dotted);
		}

		> *:nth-child(2n) {
			justify-self:start;
			@include optional-border(white, 1px, dotted);
		}
	}

	.grid2 {
		width:96%;
		@include optional-border(red, 1px, dotted);
		display:grid;
		grid-template-columns: 20% 80%;
		gap:2px 2px;
		margin:5px 3px 5px 3px;
		padding:0px;

		> *:nth-child(2n-1) {
			justify-self:center;
			white-space:nowrap;
			font-size:12px;
			overflow:visible;
			padding:0px;
			@include optional-border(white, 1px, dotted);
		}

		> *:nth-child(2n) {
			justify-self:start;
			@include optional-border(white, 1px, dotted);
		}
	}
}


/*======================== related group card ========================*/
.related-group {
	border:1px solid #4A4A4A;
	transition:all 0.3s ease;

	&:hover {
		border-color:var(--warning);
		box-shadow:0 0 8px rgba(254, 178, 4, 0.2);
	}

	.card-header {
		background-color:#2A2A2A;
		border-bottom:1px solid #4A4A4A;
		padding:0.5rem 1rem;
	}

	.img-thumbnail {
		border:1px solid #555555;
		background-color:#333333;
		padding:2px;

		&:hover {
			border-color:var(--primary);
		}
	}
}
